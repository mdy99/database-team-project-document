게임 외부
처음 시작 씬
로그인
회원 가입

로그인이후 씬
게임 시작 버튼
월드 레코드

게임 시작
게임 매니저
- 게임 입장 시
  - 플레이어 객체 필드에 데이터 할당
  - (머니, 빚 등 다)
  - 현재 전시 중인 아이템 목록 불러와서 전시 아이템 활성화하기

Source 폴더에 저장
아이템 3개 so
거래 3개 so(아이템 so를 안에 가지고 있음)

데이 웨이브 매니저
데이 시작
  - 현재 플레이어 - 데이 카운트 요청
  - 고객 3명 데이터 요구(생성해서 db에 넣은 뒤 주세요)
  - 고객 3명 생성 하나씩 배치(고객 객체에 할당 및 활성화)
  - 거래 3개 데이터 요구(거래, 존재아이템 생성 후 db 저장 후 전달주세요)
거래 매니저에 요구
  - 아이템 3개 so에 각각 값 변경 후 대기
  - 거래 3개 so에 각각 값 변경 후 대기
  - 거래 창 패널에 첫번째 거래so 데이터 다 집어넣기
  - 이벤트 tv에 띄우기
(7일 배수의 일차마다 새 이벤트 요구
첫 일주일은 이벤트 x
새 이벤트 요구하면 이벤트 객체에 이벤트 할당. 이벤트 없으면 안 띄워지는 거고 있으면 띄워지는 거고)
- 다음 날 넘어가기 요청 시
  - 플레이어 데이터 객체에서 현재 머니와 빚 등을 가져와서
  - 이자 정산하기
  - 플레이어 데이 카운트 1 증가 요청(db 플레이어-데이카운트 업데이트 해주세요)


고객 객체
- 고객이 할당 됨(데이터 다 객체 필드에 저장)
- 활성화
- 클릭 시(버튼), 거래 창 활성화 요청

거래 객체
- 거래 창 시작 요청 시
  - 거래 so에서 거래 데이터 받아와서 거래 창 텍스트에 다 띄우기
  - 거래창 활성화
- 거래 끄기 요청 시(x버튼)
  - 거래창 패널 비활성화
- 다시 고객 클릭 시 (이건 고객 객체에서 할 일이긴 하지만)
  - 거래창 패널 활성화

- 거래 완료 시, 다음 거래 so에서 거래창 데이터 넣기
  - 거래창 패널 비활성화
  - 해당 거래 정보 업데이트 요청(db에서 업데이트 해주세요)
- 거래 안 함 시, 해당 거래, 아이템 삭제 요청(db에서 삭제해주세요)

경매 패널
대출 패널
상환 패널

거래 매니저
필드
거래 so 3개 리스트
아이템 so 3개 리스트
get, set 


로그인 요청
1. 클라 로그인 요청(ID, 비번)
2. 서버가 비밀번호 검증 완료
3. SESSION_TOKEN 생성 (JAVA UUID 생각 중)
4. [DB] LOGIN_LOG에 저장 (ISACTIVE = 'Y')
5. 클라로 UUID 전달
6. 클라는 해당 UUID(세션 토큰)을 로그인용 신분증으로 들고 다님
7. 매 요청마다 해당 신분증으로 플레이어 인증

세선 만료
마지막 행동으로부터 30분이 지남.
1. 서버에서 주기적으로 (SYSDATE - LAST_ACTIVITY)가 30분 이상 지난 모든 SESSION_TOKEN들을 ISACTIVE = 'N'을 함.
2. 세션 만료된 줄도 모르고 클라가 서버로 해당 세션토큰으로 요청함
3. 서버는 [DB] 보고 해당 세션 토큰 만료됐다고 알림
4. 클라는 그거 받고 유저에게 팝업창 띄워서 새로고침하라고 알림

다중 로그인
이미 ISACTIVE = 'Y'인 세션 토큰이 있는데도 또 로그인 요청을 함
1. 기존 ISACTIVE = 'Y'인 세션토큰을 ISACTIVE='N'으로 하고, LOGOUT_TIME = SYSDATE 박음.
2. 새 로그인 요청한 클라에게 세션 토큰 새로 발급